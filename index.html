<!DOCTYPE html>
<html lang="pt-BR">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Parma en Vairon</title>
    <link
      rel="stylesheet"
      href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css"
    />
    <style>
      body {
        font-family: "Garamond", serif;
        background-color: #f5f5dc;
        color: #333;
        margin: 20px;
        transition: background-color 0.3s, color 0.3s;
        width: 100%;
        max-width: 100%;
        overflow-x: hidden; /* Impede a rolagem horizontal */
      }
      body.dark-theme {
        background-color: #1a1a1a;
        color: #e0e0e0;
      }
      h1 {
        text-align: center;
        font-size: 2.5em;
        text-decoration: underline;
      }
      h2 {
        color: #8b0000;
        font-size: 1.8em;
        margin-top: 20px;
      }
      p {
        font-size: 1.1em;
        line-height: 1.5;
      }
      .game-info {
        font-size: 0.9em;
        font-style: italic;
        color: #555;
      }
      .dark-theme .game-info {
        color: #a0a0a0;
      }
      .menu-btn {
        border-radius: 50%;
        padding: 10px;
        background-color: #8b0000;
        color: white;
        border: none;
        cursor: pointer;
        position: fixed;
        bottom: 20px;
        right: 20px;
        z-index: 1000;
      }
      .filter-menu {
        display: none;
        position: fixed;
        bottom: 80px;
        right: 20px;
        background-color: white;
        border: 1px solid #ccc;
        border-radius: 5px;
        padding: 10px;
        z-index: 1000;
        width: 250px;
      }
      .dark-theme .filter-menu {
        background-color: #333;
        border-color: #555;
        color: #e0e0e0;
      }
      .filter-menu label {
        margin-right: 10px;
      }
      .suggestions {
        position: absolute;
        background-color: white;
        border: 1px solid #ccc;
        border-radius: 5px;
        z-index: 1000;
        width: 100%;
        max-height: 200px;
        overflow-y: auto;
      }
      .dark-theme .suggestions {
        background-color: #333;
        border-color: #555;
        color: #e0e0e0;
      }
      .suggestion-item {
        padding: 5px;
        cursor: pointer;
      }
      .suggestion-item:hover {
        background-color: #f0f0f0;
      }
      .dark-theme .suggestion-item:hover {
        background-color: #444;
      }
      .favorite {
        color: #8b0000;
        cursor: pointer;
        font-size: 1.2em;
      }
      .dark-theme .favorite {
        color: #ff4444;
      }
      .clear-btn {
        background-color: transparent;
        border: none;
        cursor: pointer;
        font-size: 1.2em;
      }
      .theme-toggle-btn {
        position: fixed;
        bottom: 20px;
        left: 20px;
        background-color: #333;
        color: #ffcc00;
        border: none;
        border-radius: 50%;
        width: 50px;
        height: 50px;
        cursor: pointer;
        display: flex;
        align-items: center;
        justify-content: center;
        z-index: 1000;
        transition: background-color 0.3s, color 0.3s;
      }
      .theme-toggle-btn.dark {
        background-color: #ffcc00;
        color: #333;
      }
      @media (max-width: 768px) {
        h1 {
          font-size: 2em;
        }
        h2 {
          font-size: 1.5em;
        }
        .filter-menu {
          width: 90%;
          right: 5%;
          bottom: 70px;
        }
      }
    </style>
    <script>
      const magias = [
        {
          nome: "Faca de Gelo",
          tipo: "Slot",
          componentes: "S, M (uma gota de √°gua ou um peda√ßo de gelo)",
          ritual: false,
          concentracao: false,
          descricao:
            "Uma magia que utiliza uma l√¢mina fria que corta como o gelo, seu aroma fresco e cortante pairando no ar. Um terror cristalizado que explode em um espet√°culo de fragmentos.",
          alcance: "18 metros",
          tempoConjuracao: "A√ß√£o",
          duracao: "Instant√¢nea",
          dano: "1d10 perfurante + 2d6 g√©lido em √°rea",
          salvaguarda: "CD 13, Destreza",
        },
        {
          nome: "Curar Ferimentos",
          tipo: "Slot",
          componentes: "V, S",
          ritual: false,
          concentracao: false,
          descricao:
            "Uma magia que provoca uma car√≠cia suave, como a brisa morna de um amanhecer. Uma luz suave emana de minhas m√£os, curando o que foi danificado.",
          alcance: "Toque",
          tempoConjuracao: "A√ß√£o",
          duracao: "Instant√¢nea",
          cura: "2d8 + modificador de Sabedoria (+4)",
        },
        {
          nome: "Bom Fruto",
          tipo: "Slot",
          componentes: "V, S, M (um ramo de visco)",
          ritual: false,
          concentracao: false,
          descricao:
            "Uma magia que cria frutos m√°gicos que brotam como flores sob a luz da lua. Cada mordida oferece um sabor doce, curando e alimentando.",
          alcance: "Pessoal",
          tempoConjuracao: "A√ß√£o",
          duracao: "24 horas",
          cura: "1 ponto de vida e alimento para um dia",
        },
        {
          nome: "Prote√ß√£o Contra o Bem e o Mal",
          tipo: "Slot",
          componentes: "V, S, M (pote de √Ågua Benta, 25 PO, consumido)",
          ritual: false,
          concentracao: true,
          descricao:
            "Uma magia que cria uma aura protetora envolvendo o alvo, como um escudo contra for√ßas malignas.",
          alcance: "Toque",
          tempoConjuracao: "A√ß√£o",
          duracao: "Concentra√ß√£o, at√© 10 minutos",
        },
        {
          nome: "Onda Trovejante",
          tipo: "Slot",
          componentes: "V, S",
          ritual: false,
          concentracao: false,
          descricao:
            "Uma magia que provoca um rugido que ecoa como trov√£o, vibrando pelo ch√£o sob meus p√©s. A energia palp√°vel empurra tudo ao seu redor.",
          alcance: "Pessoal",
          tempoConjuracao: "A√ß√£o",
          duracao: "Instant√¢nea",
          dano: "2d8 de dano trovejante; empurra criaturas a at√© 4,5 metros",
          salvaguarda: "CD 13, Constitui√ß√£o",
        },
        {
          nome: "Amizade Animal",
          tipo: "Slot",
          componentes: "V, S, M (um bocado de comida)",
          ritual: false,
          concentracao: false,
          descricao:
            "Uma magia que usa um gesto suave que conecta cora√ß√µes. As feras se tornam aliadas, compartilhando suas hist√≥rias e sabedoria.",
          alcance: "9 metros",
          tempoConjuracao: "A√ß√£o",
          duracao: "24 horas",
        },
        {
          nome: "Falar com Animais",
          tipo: "Slot",
          componentes: "V, S",
          ritual: true,
          concentracao: false,
          descricao:
            "Um truque que estabelece uma conex√£o com o reino animal, onde as vozes se entrela√ßam como folhas ao vento. Os segredos da floresta s√£o revelados.",
          alcance: "Pessoal",
          tempoConjuracao: "A√ß√£o ou Ritual (10 minutos)",
          duracao: "10 minutos",
        },
        {
          nome: "Enfeiti√ßar Pessoa",
          tipo: "Slot",
          componentes: "V, S",
          ritual: false,
          concentracao: false,
          descricao:
            "Uma magia que utiliza um toque suave e sutil, como a brisa que acaricia a pele. O olhar do alvo se transforma, cheio de admira√ß√£o.",
          alcance: "9 metros",
          tempoConjuracao: "A√ß√£o",
          duracao: "1 hora",
          salvaguarda: "CD 13, Sabedoria",
        },
        {
          nome: "Fogo das Fadas",
          tipo: "Slot",
          componentes: "V",
          ritual: false,
          concentracao: true,
          descricao:
            "Um truque que cria pequenas luzes dan√ßantes, iluminando a escurid√£o como estrelas caindo. A magia flui, revelando o que estava oculto.",
          alcance: "18 metros",
          tempoConjuracao: "A√ß√£o",
          duracao: "Concentra√ß√£o, at√© 1 minuto",
        },
        {
          nome: "Badalar Funebre",
          tipo: "Truque",
          componentes: "V, S",
          ritual: false,
          concentracao: false,
          descricao:
            "Um truque que provoca um som de badalar reverberante, como um eco de lamentos. A vida se esvai, deixando apenas a morte.",
          alcance: "18 metros",
          tempoConjuracao: "A√ß√£o",
          duracao: "Instant√¢nea",
          dano: "1d8 de dano necr√≥tico (1d12 se o alvo j√° estiver ferido)",
          salvaguarda: "CD 13, Sabedoria",
        },
        {
          nome: "Criar ou Destruir √Ågua",
          tipo: "Slot",
          componentes: "V, S, M (uma mistura de √°gua e areia)",
          ritual: false,
          concentracao: false,
          descricao:
            "Uma magia que permite moldar a √°gua com um gesto suave, criando ou destruindo grandes quantidades com facilidade.",
          alcance: "9 metros",
          tempoConjuracao: "A√ß√£o",
          duracao: "Instant√¢nea",
        },
        {
          nome: "Passos Largos",
          tipo: "Slot",
          componentes: "V, S, M (uma pitada de poeira)",
          ritual: false,
          concentracao: false,
          descricao:
            "Uma magia que aumenta a velocidade de movimento do alvo, como se a brisa o carregasse para frente.",
          alcance: "Toque",
          tempoConjuracao: "A√ß√£o",
          duracao: "1 hora",
        },
        {
          nome: "Salto",
          tipo: "Slot",
          componentes: "V, S, M (perna traseira de um gafanhoto)",
          ritual: false,
          concentracao: false,
          descricao:
            "Uma magia que permite ao alvo saltar grandes dist√¢ncias, como se as for√ßas da natureza o impulsionassem.",
          alcance: "Toque",
          tempoConjuracao: "A√ß√£o B√¥nus",
          duracao: "1 minuto",
        },
        {
          nome: "Bord√£o M√≠stico",
          tipo: "Slot",
          componentes: "V, S, M (um ramo de visco)",
          ritual: false,
          concentracao: false,
          descricao:
            "Uma magia que transforma o cajado em uma arma poderosa, canalizando a energia da floresta.",
          alcance: "Pessoal",
          tempoConjuracao: "A√ß√£o B√¥nus",
          duracao: "1 minuto",
        },
        {
          nome: "Raio de Bruxa",
          tipo: "Truque",
          componentes: "V, S, M (um galho atingido por um raio)",
          ritual: false,
          concentracao: true,
          descricao:
            "Uma magia que provoca um golpe el√©trico que ressoa como o trov√£o, a eletricidade dan√ßa entre meus dedos antes de atingir o alvo.",
          alcance: "18 metros",
          tempoConjuracao: "A√ß√£o",
          duracao: "Concentra√ß√£o, at√© 1 minuto",
          dano: "2d12 no primeiro ataque; 1d12 em turnos subsequentes",
        },
        {
          nome: "Detectar Magia",
          tipo: "Ritual",
          componentes: "V, S",
          ritual: true,
          concentracao: true,
          descricao:
            "Uma magia que revela a presen√ßa de magia, permitindo que Vairon veja auras m√°gicas ao seu redor.",
          alcance: "Pessoal",
          tempoConjuracao: "10 minutos (ritual) ou A√ß√£o",
          duracao: "Concentra√ß√£o, at√© 10 minutos",
        },
        {
          nome: "Detectar Veneno e Doen√ßa",
          tipo: "Ritual",
          componentes: "V, S, M (uma folha de teixo)",
          ritual: true,
          concentracao: true,
          descricao:
            "Uma magia que permite a Vairon detectar venenos e doen√ßas, como um faro agu√ßado para perigos ocultos.",
          alcance: "Pessoal",
          tempoConjuracao: "10 minutos (ritual) ou A√ß√£o",
          duracao: "Concentra√ß√£o, at√© 10 minutos",
        },
        {
          nome: "Purificar Alimentos e Bebidas",
          tipo: "Ritual",
          componentes: "V, S",
          ritual: true,
          concentracao: false,
          descricao:
            "Uma magia que limpa a podrid√£o, como a √°gua cristalina de um riacho. O odor de veneno se dissipa, dando lugar √† frescura.",
          alcance: "3 metros",
          tempoConjuracao: "10 minutos (ritual) ou A√ß√£o",
          duracao: "Instant√¢nea",
        },
        {
          nome: "Arte Dru√≠dica",
          tipo: "Truque",
          componentes: "V, S",
          ritual: false,
          concentracao: false,
          descricao:
            "Um truque que cria efeitos sensoriais inofensivos, como folhas caindo ou fadas dan√ßantes, evocando a beleza da natureza.",
          alcance: "9 metros",
          tempoConjuracao: "A√ß√£o",
          duracao: "Instant√¢nea",
        },
        {
          nome: "Rajada de Veneno",
          tipo: "Truque",
          componentes: "V, S",
          ritual: false,
          concentracao: false,
          descricao:
            "Um truque que transforma a fuma√ßa do cachimbo em uma n√©voa t√≥xica, causando dano venenoso aos que se aproximam.",
          alcance: "9 metros",
          tempoConjuracao: "A√ß√£o",
          duracao: "Instant√¢nea",
          dano: "1d12 de dano venenoso",
        },
      ];

      let favoritos = [];
      let filtros = {
        truques: false,
        semSlot: false,
        comSlot: false,
        rituais: false,
        concentracao: false,
        materiais: false,
        favoritos: false,
      };

      function toggleMenu() {
        const menu = document.getElementById("filter-menu");
        menu.style.display = menu.style.display === "block" ? "none" : "block";
      }

      function toggleFavorito(nome) {
        if (favoritos.includes(nome)) {
          favoritos = favoritos.filter((m) => m !== nome);
        } else {
          favoritos.push(nome);
        }
        atualizarMagias();
      }

      function atualizarMagias() {
        const magiasFiltradas = magias.filter((magia) => {
          const filtroTruques = !filtros.truques || magia.tipo === "Truque";
          const filtroSemSlot =
            !filtros.semSlot ||
            magia.tipo === "Ritual" ||
            magia.tipo === "Truque";
          const filtroComSlot = !filtros.comSlot || magia.tipo === "Slot";
          const filtroRituais = !filtros.rituais || magia.ritual;
          const filtroConcentracao =
            !filtros.concentracao || magia.concentracao;
          const filtroMateriais =
            !filtros.materiais || magia.componentes.includes("M");
          const filtroFavoritos =
            !filtros.favoritos || favoritos.includes(magia.nome);

          return (
            filtroTruques &&
            filtroSemSlot &&
            filtroComSlot &&
            filtroRituais &&
            filtroConcentracao &&
            filtroMateriais &&
            filtroFavoritos
          );
        });

        const container = document.getElementById("magias-container");
        container.innerHTML = "";

        magiasFiltradas.forEach((magia) => {
          const magiaElement = document.createElement("div");
          magiaElement.className = "col-md-6";
          magiaElement.innerHTML = `
                    <h2>${
                      magia.nome
                    } <span class="favorite" onclick="toggleFavorito('${
            magia.nome
          }')">${favoritos.includes(magia.nome) ? "‚ò†Ô∏è" : "‚ò†"}</span></h2>
                    <p><i>${magia.descricao}</i></p>
                    <p class="game-info">
                        Alcance: <i>${magia.alcance}</i>; 
                        Tempo de Conjura√ß√£o: <i>${magia.tempoConjuracao}</i>; 
                        Dura√ß√£o: <i>${magia.duracao}</i>; 
                        Componentes: <i>${magia.componentes}</i>; 
                        ${magia.dano ? `Dano: <i>${magia.dano}</i>; ` : ""}
                        ${magia.cura ? `Cura: <i>${magia.cura}</i>; ` : ""}
                        ${
                          magia.salvaguarda
                            ? `Salvaguarda: <i>${magia.salvaguarda}</i>`
                            : ""
                        }
                    </p>
                `;
          container.appendChild(magiaElement);
        });
      }

      function aplicarFiltros() {
        filtros.truques = document.getElementById("filtro-truques").checked;
        filtros.semSlot = document.getElementById("filtro-sem-slot").checked;
        filtros.comSlot = document.getElementById("filtro-com-slot").checked;
        filtros.rituais = document.getElementById("filtro-rituais").checked;
        filtros.concentracao = document.getElementById(
          "filtro-concentracao"
        ).checked;
        filtros.materiais = document.getElementById("filtro-materiais").checked;
        filtros.favoritos = document.getElementById("filtro-favoritos").checked;
        atualizarMagias();
      }

      function mostrarSugestoes() {
        const input = document.getElementById("pesquisa").value.toLowerCase();
        const sugestoes = magias.filter((magia) =>
          magia.nome.toLowerCase().includes(input)
        );
        const sugestoesContainer = document.getElementById("sugestoes");
        sugestoesContainer.innerHTML = "";

        sugestoes.forEach((magia) => {
          const item = document.createElement("div");
          item.className = "suggestion-item";
          item.innerHTML = `
                    <input type="checkbox" onchange="selecionarMagia('${magia.nome}')"> ${magia.nome}
                `;
          item.onclick = () => mostrarMagiaUnica(magia.nome);
          sugestoesContainer.appendChild(item);
        });

        sugestoesContainer.style.display =
          sugestoes.length > 0 ? "block" : "none";
      }

      function selecionarMagia(nome) {
        const magiaElement = document.querySelector(
          `h2:contains('${nome}')`
        ).parentElement;
        magiaElement.style.order = -1;
      }

      function mostrarMagiaUnica(nome) {
        const todasMagias = document.querySelectorAll(".col-md-6");
        todasMagias.forEach((magia) => {
          magia.style.display = magia
            .querySelector("h2")
            .innerText.includes(nome)
            ? "block"
            : "none";
        });
        document.getElementById("sugestoes").style.display = "none";
      }

      function limparFiltros() {
        document.getElementById("filtro-truques").checked = false;
        document.getElementById("filtro-sem-slot").checked = false;
        document.getElementById("filtro-com-slot").checked = false;
        document.getElementById("filtro-rituais").checked = false;
        document.getElementById("filtro-concentracao").checked = false;
        document.getElementById("filtro-materiais").checked = false;
        document.getElementById("filtro-favoritos").checked = false;
        atualizarMagias();
      }

      function toggleTheme() {
        const body = document.body;
        const themeToggleBtn = document.getElementById("theme-toggle-btn");
        if (body.classList.contains("dark-theme")) {
          body.classList.remove("dark-theme");
          themeToggleBtn.classList.remove("dark");
          localStorage.setItem("theme", "light");
        } else {
          body.classList.add("dark-theme");
          themeToggleBtn.classList.add("dark");
          localStorage.setItem("theme", "dark");
        }
      }

      function detectSystemTheme() {
        const prefersDarkScheme = window.matchMedia(
          "(prefers-color-scheme: dark)"
        );
        const savedTheme = localStorage.getItem("theme");
        if (
          savedTheme === "dark" ||
          (prefersDarkScheme.matches && savedTheme !== "light")
        ) {
          document.body.classList.add("dark-theme");
          document.getElementById("theme-toggle-btn").classList.add("dark");
        }
      }

      document.addEventListener("click", (event) => {
        const sugestoes = document.getElementById("sugestoes");
        const pesquisa = document.getElementById("pesquisa");
        if (event.target !== pesquisa && !sugestoes.contains(event.target)) {
          sugestoes.style.display = "none";
        }
      });

      document.addEventListener("DOMContentLoaded", () => {
        detectSystemTheme();
        atualizarMagias();
      });
    </script>
  </head>
  <body>
    <h1>Parma en Vairon</h1>

    <div class="container">
      <div class="row mb-3">
        <div class="col-md-12 d-flex">
          <input
            type="text"
            id="pesquisa"
            class="form-control"
            placeholder="Pesquisar Magias..."
            oninput="mostrarSugestoes()"
          />
          <button class="clear-btn" onclick="limparFiltros()">üßπ</button>
        </div>
        <div id="sugestoes" class="suggestions"></div>
      </div>

      <div class="row" id="magias-container">
        <!-- As magias ser√£o carregadas aqui dinamicamente -->
      </div>
    </div>

    <button class="menu-btn" onclick="toggleMenu()">‚ò∞</button>
    <div id="filter-menu" class="filter-menu">
      <h5>Filtros</h5>
      <div>
        <label
          ><input
            type="checkbox"
            id="filtro-truques"
            onchange="aplicarFiltros()"
          />
          Magias que s√£o truques</label
        ><br />
        <label
          ><input
            type="checkbox"
            id="filtro-sem-slot"
            onchange="aplicarFiltros()"
          />
          Magias que n√£o usam Slot de Magia</label
        ><br />
        <label
          ><input
            type="checkbox"
            id="filtro-com-slot"
            onchange="aplicarFiltros()"
          />
          Magias que usam Slot de Magia</label
        ><br />
        <label
          ><input
            type="checkbox"
            id="filtro-rituais"
            onchange="aplicarFiltros()"
          />
          Magias Rituais</label
        ><br />
        <label
          ><input
            type="checkbox"
            id="filtro-concentracao"
            onchange="aplicarFiltros()"
          />
          Magias que exigem concentra√ß√£o</label
        ><br />
        <label
          ><input
            type="checkbox"
            id="filtro-materiais"
            onchange="aplicarFiltros()"
          />
          Magias que exigem materiais</label
        ><br />
        <label
          ><input
            type="checkbox"
            id="filtro-favoritos"
            onchange="aplicarFiltros()"
          />
          Magias Favoritas</label
        >
      </div>
    </div>

    <button
      id="theme-toggle-btn"
      class="theme-toggle-btn"
      onclick="toggleTheme()"
    >
      üí°
    </button>

    <footer>
      <p style="text-align: center">Na l√ª thind helluvin</p>
    </footer>
  </body>
</html>
